# О проекте

Полнофункциональная система онлайн-бронирования билетов в кинотеатр с административной панелью управления. Система предоставляет возможность бронирования билетов онлайн для клиентов и полное управление кинотеатром для администраторов. Проект создан в учебных целях.

## Основные возможности

**Для клиентов:**
- Просмотр расписания сеансов на неделю
- Выбор даты и времени посещения
- Интерактивный выбор мест в кинозале
- Онлайн-бронирование билетов
- Генерация QR-кодов для электронных билетов

**Для администраторов:**
- Управление кинозалами (создание, редактирование, удаление)
- Настройка схемы залов (ряды, места, типы кресел)
- Управление фильмами (добавление, редактирование, загрузка постеров)
- Настройка цен на билеты
- Составление расписания сеансов
- Контроль продаж билетов

## Технологический стек

### Frontend
- **React 18** + TypeScript
- **Vite** - сборка и dev-сервер
- **React Router** - навигация
- **Axios** - HTTP-клиент
- **CSS Modules** - стилизация

### Backend
- **Laravel 12** - PHP фреймворк
- **SQLite** - база данных (по умолчанию)
- **Simple QrCode** - генерация QR-кодов
- **Laravel Sanctum** - аутентификация

## Структура проекта
cinema-booking/
├── frontend/ # React приложение
│ ├── src/
│ │ ├── components/ # React компоненты
│ │ │ ├── admin/ # Админские компоненты
│ │ │ └── client/ # Клиентские компоненты
│ │ ├── pages/ # Страницы приложения
│ │ ├── hooks/ # Кастомные хуки
│ │ ├── services/ # API клиент
│ │ └── types/ # TypeScript типы
│ └── package.json
├── app/ # Laravel приложение
│ ├── app/
│ │ ├── Http/
│ │ │ └── Controllers/ # API контроллеры
│ │ ├── Models/ # Eloquent модели
│ │ └── Middleware/ # Промежуточное ПО
│ ├── database/
│ │ ├── migrations/ # Миграции БД
│ │ └── seeders/ # Наполнители БД
│ └── routes/
│ └── api.php # API маршруты
└── README.md

## Быстрый старт

### Предварительные требования
- PHP 8.2 или выше
- Composer
- Node.js 18+ и npm
- SQLite (или MySQL/PostgreSQL)

### Установка и запуск

1. **Клонирование репозитория**
git clone <https://github.com/yulti879/diplom>


2. **Настройка бэкенда (Laravel)**

Переход в папку бэкенда
cd ../backend

Установка зависимостей
composer install

Копирование файла окружения
cp .env.example .env

Генерация ключа приложения
php artisan key:generate

Создание базы данных SQLite
touch database/database.sqlite

Миграции и сидеры
php artisan migrate --seed
Настройка фронтенда (React)

Запуск бэкенда
php artisan serve

3. **Настройка фронтенда (React)**

Переход в папку фронтенда
cd ../frontend

Установка зависимостей
npm install

Запуск dev-сервера
npm run dev

После выполнения этих шагов:

Фронтенд будет доступен по адресу: http://localhost:3000

Бэкенд будет доступен по адресу: http://localhost:8000

API endpoints: http://localhost:8000/api/*

## Детальная настройка

### Настройка базы данных
По умолчанию используется SQLite. Для использования MySQL/PostgreSQL:
Отредактируйте .env файл:
env
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=cinema_booking
DB_USERNAME=root
DB_PASSWORD=
Создайте базу данных и выполните миграции:
php artisan migrate

### Административный доступ
После выполнения сидов создается администратор:
Email: admin@cinema.ru
Пароль: admin123
Для входа в админку перейдите по пути /admin


## API Endpoints

### Аутентификация
POST /api/auth/login - вход в систему
POST /api/auth/logout - выход из системы
GET /api/auth/user - информация о пользователе

### Основные ресурсы
GET /api/cinema-halls - список залов
GET /api/movies - список фильмов
GET /api/screenings - расписание сеансов
POST /api/bookings - создание бронирования
GET /api/screenings/{id}/booked-seats - занятые места

### Административные
CRUD операции для залов, фильмов, сеансов
POST /api/upload-poster - загрузка постеров
GET /api/qr-code/booking/{code} - генерация QR-кода

## Особенности реализации

### Frontend
- TypeScript для типобезопасности
- React Hooks для управления состоянием
- Context API для глобального состояния
- Адаптивный дизайн для мобильных устройств
- Интерактивная схема зала с выбором мест

### Backend
- RESTful API архитектура
- Валидация запросов на стороне сервера
- Eloquent ORM для работы с БД
- Middleware для CORS и безопасности
- Генерация QR-кодов в реальном времени

### Безопасность
- Хеширование паролей
- Валидация входных данных
- Защита от SQL-инъекций
- CORS политики
- Проверка прав доступа

## Миграции базы данных
Проект включает следующие миграции:
cinema_halls - кинозалы
movies - фильмы
screenings - сеансы
bookings - бронирования
users - пользователи

Для выполнения миграций:
php artisan migrate

Для отката:
php artisan migrate:rollback


## Решение проблем

### CORS ошибки
Убедитесь, что фронтенд и бэкенд работают на правильных портах
Проверьте настройки в config/cors.php

### Проблемы с базой данных
Проверьте права доступа к файлу БД (для SQLite)
Убедитесь, что миграции выполнены

### Проблемы с загрузкой постеров
Проверьте права на запись в папку frontend/public/images/posters/

## Логирование
Логи приложения находятся в storage/logs/laravel.log